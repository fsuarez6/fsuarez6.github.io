I"<section id="table-of-contents" class="toc">
  <header>
    <h3><i class="fa fa-book"></i> Overview</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#installation" id="markdown-toc-installation">Installation</a>    <ul>
      <li><a href="#requirements" id="markdown-toc-requirements">Requirements</a></li>
      <li><a href="#openhaptics-sdk" id="markdown-toc-openhaptics-sdk">OpenHaptics SDK</a></li>
      <li><a href="#symbolic-links" id="markdown-toc-symbolic-links">Symbolic Links</a></li>
      <li><a href="#ros-metapackage" id="markdown-toc-ros-metapackage">ROS Metapackage</a></li>
      <li><a href="#allow-access-to-the-firewire-interface" id="markdown-toc-allow-access-to-the-firewire-interface">Allow Access to the FireWire Interface</a></li>
      <li><a href="#testing-the-installation" id="markdown-toc-testing-the-installation">Testing the Installation</a></li>
    </ul>
  </li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<figure style="text-align: center;">
  <img src="https://raw.github.com/fsuarez6/phantom_omni/hydro-devel/omni_description/resources/OmniRviz.png" />
  <figcaption>Omni in RViz</figcaption>
</figure>

<p><strong>Last update:</strong> April 1st, 2020</p>

<p>These ROS packages are for the Geomagic Touch (formerly Sensable PHANToM Omni) haptic device – <strong>firewire</strong> version.</p>

<p>I developed them during my time at the <a href="http://www.romin.upm.es/">Group of Robots and Intelligent Machines</a>, Universidad Politécnica de Madrid.</p>

<h2 id="installation">Installation</h2>

<p>These instructions have been tested with OpenHaptics SDK 3.0 in Ubuntu 16.04, 64 bits and ROS Kinetic.
Before going any further please check the following:</p>

<ul>
  <li>You have a <strong>firewire</strong> device NOT the Ethernet one.</li>
  <li>Your development machine has a <strong>firewire</strong> port. I have tested both Firewire400 and Firewire800 and they work just fine.</li>
  <li>You understand what a <em>catkin workspace</em>, a <em>symbolic link</em> and a <em>git repository</em> are.</li>
</ul>

<h3 id="requirements">Requirements</h3>
<p>The following are the requirements so that you can run <code class="highlighter-rouge">PHANToMConfiguration</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">--no-install-recommends</span> freeglut3-dev g++ libdrm-dev <span class="se">\</span>
libexpat1-dev libncurses5-dev libraw1394-dev libx11-dev libxdamage-dev    <span class="se">\</span>
libxext-dev libxt-dev libxxf86vm-dev tcsh unzip x11proto-dri2-dev         <span class="se">\</span>
x11proto-gl-dev x11proto-print-dev</code></pre></figure>

<h3 id="openhaptics-sdk">OpenHaptics SDK</h3>
<p>In order to connect to the device, you will need to install <a href="http://www.dentsable.com/products-openhaptics-toolkit.htm">OpenHaptics SDK</a>.</p>

<h3 id="symbolic-links">Symbolic Links</h3>
<p>Because OpenHaptics SDK installs the libraries in some weird locations, you need to create the following symbolic links: (<strong>Only required in 64 bits systems</strong>)</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/lib/x86_64-linux-gnu/libraw1394.so.11 /usr/lib/libraw1394.so.8
<span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/lib64/libPHANToMIO.so.4.3 /usr/lib/libPHANToMIO.so.4
<span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/lib64/libHD.so.3.0.0 /usr/lib/libHD.so.3.0
<span class="nb">sudo ln</span> <span class="nt">-s</span> /usr/lib64/libHL.so.3.0.0 /usr/lib/libHL.so.3.0</code></pre></figure>

<h3 id="ros-metapackage">ROS Metapackage</h3>

<p>Go to your ROS working directory. e.g.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/catkin_ws/src</code></pre></figure>

<p>Use the <code class="highlighter-rouge">wstool</code> to install the repository</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">wstool init <span class="nb">.</span>
wstool merge https://raw.github.com/fsuarez6/phantom_omni/hydro-devel/phantom_omni.rosinstall
wstool update</code></pre></figure>

<p>Check for any missing dependencies using rosdep:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">source</span> /opt/ros/<span class="nv">$ROS_DISTRO</span>/setup.bash
rosdep update
rosdep check <span class="nt">--from-paths</span> <span class="nb">.</span> <span class="nt">--ignore-src</span> <span class="nt">--rosdistro</span> <span class="nv">$ROS_DISTRO</span></code></pre></figure>

<p>After installing the missing dependencies compile your ROS workspace. e.g.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/catkin_ws <span class="o">&amp;&amp;</span> catkin_make</code></pre></figure>

<p>Be sure to always source the appropriate ROS setup file, e.g:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">source</span> ~/catkin_ws/devel/setup.bash</code></pre></figure>

<p>You might want to add that line to your <code class="highlighter-rouge">~/.bashrc</code>.</p>

<h3 id="allow-access-to-the-firewire-interface">Allow Access to the FireWire Interface</h3>

<p>This package provides a dummy driver that allows you to access the 
FireWire interface. For new installations or every time you upgrade your linux kernel, please run the following command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">rosrun omni_common initialize_device.sh <span class="nt">-c</span></code></pre></figure>

<h3 id="testing-the-installation">Testing the Installation</h3>

<p>Try the <code class="highlighter-rouge">omni.launch</code> file in the <code class="highlighter-rouge">omni_common</code> package:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">roslaunch omni_common omni.launch</code></pre></figure>

:ET